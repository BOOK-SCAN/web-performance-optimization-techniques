# 📝 Contents

## 웹 최적화의 역사
- 텍스트와 더불어 이미지들이 페이지를 장식하기 시작하면서 기업들은 로딩 속도를 개선하는 백엔드 인프라에 투자를 시작했다. 웹 최적화는 주로 서버 용량 증설이나 웹 서버 등 소프트웨어 성능 개선에 집중되었다.
- 오늘날 디지털 비즈니스에는 사용자 경험이 매우 강조된다. 웹사이트 성능 개선은 사용자 경험 향상의 초석이자 첨병으로 평가된다.

### 모바일 기기의 등장과 모바일 사이트 최적화
- 모바일 기기의 트래픽이 데스크톱 기기의 트래픽을 크게 앞지르면서 이제는 모바일 사용자의 경험이 훨씬 중요해졌다.
- 이후 모바일과 데스크톱 사용자의 사이트 경험을 동일하게 만들기 위해 반응형 웹 기술이 적용되었다. 
  + 반응형 웹: 데스크톱과 모바일 기기 사용자가 동일한 기능과 사용자 인터페이스를 경험하도록 하자는 디자인 패러다임
- 하지만 데스크톱에서 나타나는 커다란 이미지들을 모바일 기기에도 동일하게 다운하다보니 모바일 기기에서 사이트 로딩이 크게 느려져 모바일 사용자들의 경험에 부정적인 영향을 미쳤다.
  + 이러한 문제를 해결하기 위해 미디어 쿼리, <picture> 태그, srcset 속성 등을 이용해 사용자 기기에 따라 다른 크기의 리소스들을 다운로드하도록 했다.
  + 또 다른 접근법으로 서버 측에서 접속자의 환경을 미리 파악하여 최적화된 리소스들을 만들어 내려주는 방법이 있다. 이상적이지만 아직 접속 기기의 정보를 정확하게 파악하기 어렵다는 단점이 있다.
- 예약 사이트나 장바구니, 결제 페이지처럼 기능이 강조되거나 페이지의 일부분이 변경되는 사이트에는 SPA 접근법이 적용된다.
- 시각적인 부분이 강조되고, 다음 페이지로 이동할 때마다 전체 페이지가 다시 로딩되어야 하는 경우에는 서버 측 접근법이 더 효율적이다.
- 이 밖에 구글은 모바일 사용자의 경험을 극대화하기 위해 PWA와 AMP를 제시했다.

## PWA
- 네이티브 앱에는 여러 가지 장점이 있다.
  + 인터넷이 연결되지 않아도 앱이 구동되므로 인터넷 연결이 끊길 때의 답답함이 없다.
  + 기기의 운영 체제와 보다 잘 통합되어 더 매끄러운 사용자 경험을 할 수 있다. 
  + 백그라운드에서 관심있는 뉴스나 정보의 푸시 알림을 보내준다.
- 하지만 네이티브 앱을 사용하려면 앱 스토어에서 검색하고 다운로드해야 하는 불편함이 있다. 용량이 큰 앱은 설치까지 시간이 걸리고 설치된 앱이 많을수록 기기의 성능이 떨어지고 앱의 수행 속도도 눈에 띄게 느려진다.
- 최신 사양에 맞추어 개발된 모바일 앱들은 오히려 중저가 스마트폰 사용자의 경험을 저하시킬 수 있다.
- 네이티브 앱과 다르게 모바일 웹에서 제공하는 몇 가지 중요한 이점들이 있다.
  + URL만 클릭하면 웹사이트에 접속할 수 있어 빠르고 쉽게 접근할 수 있다.
  + URL 링크만으로 많은 사용자들에게 사이트 정보를 전파할 수 있다.
- 정리하면 네이티브 앱은 높은 기능성을, 모바일 웹은 넓은 범용성을 제공한다고 할 수 있다.
- PWA는 이러한 네이티브 앱과 모바일 웹의 장점을 모두 갖추도록 특정 기술과 표준 패턴을 사용해 개발한 웹 앱이다.
  + 별도로 설치하지 않아도 된다.
  + 오프라인에서 동작할 수 있다.
  + 필요한 경우 푸시 알림을 통해 주요 정보를 능동적으로 전달할 수도 있다.
  + 전체 화면은 모바일 앱처럼 구성되고, 모바일 앱과 동일하게 홈 화면에 앱 아이콘을 추가할 수도 있다.
- 구글의 개발자 알렉스는 PWA가 다음과 같은 핵심 특징을 가져야 한다고 강조한다.
  + PWA의 주요 특징
     + 모든 형태의 화면에 대응해야 한다: 반응형 설계를 통해 모든 기기(모바일, 노트북, 스마트워치 등)에서 작동할 수 있다.
     + 네트워크 독립적이어야 한다: 서비스 워커를 이용하여 오프라인이나 네트워크 연결이 불안정한 상황에서도 작동할 수 있다.
    + 앱과 같은 인터페이스를 제공해야 한다: 셸과 콘텐츠를 분리하여 앱처럼 직관적인 사용자 경험을 제공한다.
    + 항상 최신 상태를 유지해야 한다: 서비스 워커의 업데이트 프로세스를 통해 콘텐츠를 최신 상태로 유지할 수 있다.
    + 보안을 강화해야 한다: HTTPS를 통해 민감한 데이터를 보호할 수 있다.
    + 검색 가능성을 가져야 한다: 애플리케이션 매니페스트 파일을 사용하여 검색 엔진에서 쉽게 노출될 수 있도록 해야 한다.
    + 사용자의 재참여를 유도해야 한다: 푸시 알림을 통해 주요 정보를 제공하며 사용자의 재방문을 유도할 수 있다.
    + 설치 가능해야 한다: 홈 화면에 아이콘을 추가하여 빠르게 접근할 수 있어야 한다.
    + 간단히 공유할 수 있어야 한다: URL 링크만으로 콘텐츠를 손쉽게 공유할 수 있어야 한다.
- PWA의 장점
    + 빠른 로딩 속도를 제공한다: 서비스 워커를 통해 캐싱된 리소스를 활용하여 앱의 속도와 데이터 사용 효율성을 높일 수 있다.
    + 업데이트가 효율적이다: 변경된 콘텐츠만 업데이트하기 때문에 시간과 비용을 절감할 수 있다.
    + 플랫폼 독립적으로 작동한다: 다양한 기기와 운영체제에서 동일한 사용자 경험을 제공할 수 있다.
    + 푸시 알림을 활용하여 사용자 참여를 증대할 수 있다: 사용자 참여를 통해 비즈니스 전환율을 높일 수 있다.

## PWA 주요 기술
### PWA 어플리케이션 아키텍처
- PWA는 애플리케이션 셸과 콘텐츠로 구성된다.  
- 애플리케이션 셸은 HTML, CSS, JavaScript 같은 정적 리소스로 앱의 기본 구조를 제공하며, 첫 로딩 시 캐싱된다.  
- 콘텐츠는 API를 통해 동적으로 제공되며, 애플리케이션 셸과 분리된다.  
- 네트워크 연결이 끊긴 상태에서도 캐싱된 애플리케이션 셸을 활용하여 사용자 경험을 유지할 수 있다.  

### 애플리케이션 매니페스트 파일
- JSON 기반의 파일로, 앱의 시작 URL, 홈 화면 아이콘, 표시 방향, 테마 색상 등의 정보를 정의한다.  
- 매니페스트 파일은 브라우저가 PWA를 식별하고 실행하기 위해 필수적이다.  
- 매니페스트 파일을 `<link rel="manifest" href="/manifest.json">` 형태로 웹 페이지에 연결해야 한다.  

### 서비스 워커
- 서비스 워커는 브라우저와 독립적으로 실행되는 자바스크립트 파일이다.  
- 캐시 관리, 푸시 알림, 백그라운드 동기화 같은 작업을 수행하며 오프라인 상태에서도 앱을 실행할 수 있다.  
- 서비스 워커는 등록, 설치, 활성화 단계를 거쳐 작동하며, 네트워크 요청을 가로채 필요한 리소스를 캐싱하거나 검색한다.  

## PWA 사례
### 스타벅스
- 스타벅스는 PWA를 통해 네트워크 연결이 불안정한 환경에서도 사용자들이 주문할 수 있는 시스템을 구현했다.  
- 기존 네이티브 앱 대비 PWA 사용률이 증가하고, 사용자의 참여와 주문 전환율이 개선되고 있다.  

### MakeMyTrip
- MakeMyTrip은 인도의 모바일 사용자를 겨냥한 PWA를 개발하여 페이지 로딩 시간을 38% 단축했다.  
- 이로 인해 구매 전환율이 기존 대비 3배 증가하는 효과를 얻었다.  

### Pinterest
- Pinterest는 PWA를 도입해 모바일 웹 성능을 개선했다.  
- 사용자 체류 시간이 40% 증가하고 주요 기능에 대한 사용자 참여와 광고 수익이 크게 개선되고 있다.  

## AMP

### AMP의 특징
- 모든 JavaScript를 비동기로 처리하여 콘텐츠 렌더링을 방해하지 않는다.  
- 리소스 크기를 미리 정의해 불필요한 레이아웃 변경을 방지한다.  
- 경량화된 CSS를 사용하며, 웹폰트를 최적화해 빠른 로딩을 지원한다.  
- GPU 가속을 활용하여 고성능 그래픽 작업을 처리한다.  
- 중요 리소스를 우선 로딩하여 사용자가 바로 볼 콘텐츠를 먼저 제공한다.  

### AMP의 구성 요소
#### AMP HTML
- AMP는 HTML5를 기반으로 하며, 특정 규칙을 준수해야 한다.  
- 기존 HTML 태그 대신 AMP에서 제공하는 맞춤 태그를 사용해 웹 성능을 최적화한다.  

#### 마크업 규칙
- HTML 문서는 `<html amp>` 형태로 작성하며, `<meta charset="utf-8">`과 같은 기본적인 구조를 갖춰야 한다.  
- AMP 자바스크립트 라이브러리를 `<script async src="https://cdn.ampproject.org/v0.js">`로 포함해야 한다.  

#### 속성
- on, layout, width, height 등 AMP 태그에서 사용 가능한 속성들은 각 요소의 레이아웃과 동작 방식을 정의한다.  

#### 스타일 시트
- AMP에서는 50KB 이하의 스타일 시트만 허용되며, `<style amp-custom>` 태그로 작성해야 한다.  

#### 폰트
- 맞춤 웹폰트는 제한적으로 허용되며, Google Fonts, Fonts.com 등에서 제공하는 폰트만 사용할 수 있다.  

#### Metadata
- AMP 페이지는 구조화된 데이터 메타 정보를 포함하여 검색 엔진에 최적화된 콘텐츠로 표시될 수 있다.  

#### 컴포넌트
- AMP 컴포넌트는 HTML에서 사용할 수 없는 고급 기능을 제공하며, 리소스 로딩 및 성능 최적화를 지원한다.  

#### amp-script
- 웹 워커를 이용해 별도의 스크립트를 실행하며, DOM 변경 사항을 효율적으로 반영한다.  

#### amp-analytics
- 사이트 성능 및 사용자 행동을 분석하며, Google Analytics 같은 외부 도구와 통합할 수 있다.  

#### amp-ad
- AMP 페이지에 최적화된 광고 콘텐츠를 제공하며, AMP를 지원하는 광고 네트워크에서 사용 가능하다.  

#### AMP cache
- AMP 캐시는 유효한 AMP 페이지를 자동으로 검증하고 캐싱하여 콘텐츠를 빠르게 제공한다.  

### AMP와 반응형 웹 디자인
- AMP는 반응형 웹 디자인과 호환되며, layout 속성을 사용해 기기의 화면 크기에 따라 자동으로 조정된다.  
- 미디어 쿼리와 srcset 등을 지원하여 다양한 디바이스에서 최적화된 콘텐츠를 제공할 수 있다.  

## 웹 최적화의 실상과 과제

### 웹 최적화의 실상
- 네트워크 속도와 스마트폰 성능이 향상되었지만 웹사이트 로딩 속도는 크게 개선되지 않고 있다.  
- 웹페이지에서 사용되는 이미지와 자바스크립트 파일 크기가 증가하면서 성능 문제가 발생하고 있다.  
- 저사양 기기와 느린 네트워크 환경의 사용자는 여전히 부정적인 웹 경험을 하고 있다.  

### 웹 최적화의 과제
- 실사용자 데이터를 기반으로 성능을 분석하여 성능 저하 원인을 파악해야 한다.  
- 자바스크립트 코드의 수와 크기를 줄이고, 페이지별로 필요한 스크립트만 포함해야 한다.  
- 사용자 환경에 맞춘 맞춤형 리소스 최적화를 수행해야 한다.  
- WebAssembly와 같은 새로운 기술을 도입하여 고성능 작업을 효율적으로 처리해야 한다.  


# 💭 Insights
